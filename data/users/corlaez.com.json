{
  "items": [
    {
      "type": [
        "h-feed"
      ],
      "properties": {
        "url": [
          "https://corlaez.com/",
          "https://corlaez.com/",
          "https://xn--sr8hvo.ws/%F0%9F%94%AE%F0%9F%90%9C%F0%9F%9A%87/previous",
          "https://xn--sr8hvo.ws/",
          "https://xn--sr8hvo.ws/%F0%9F%94%AE%F0%9F%90%9C%F0%9F%9A%87/next"
        ],
        "name": [
          "Hi! I am Armando"
        ],
        "author": [
          {
            "type": [
              "h-card"
            ],
            "properties": {
              "photo": [
                {
                  "value": "https://corlaez.com/assets/signature-white-210.png",
                  "alt": "Logo that reads A R"
                }
              ],
              "url": [
                "https://corlaez.com/",
                "https://github.com/corlaez",
                "https://linkedin.com/in/corlaez",
                "https://twitter.com/corlaez"
              ],
              "uid": [
                "https://corlaez.com/"
              ],
              "name": [
                "Armando Cordova"
              ]
            },
            "value": "Armando Cordova"
          }
        ]
      },
      "children": [
        {
          "type": [
            "h-entry"
          ],
          "properties": {
            "url": [
              "https://corlaez.com/blog/hexagonal-feedback.html"
            ],
            "name": [
              "Hexagonal Feedback"
            ],
            "content": [
              {
                "html": "<p><em><time class=\"dt-published\" datetime=\"2022-09-20T00:00:00\">Sep 20, 2022</time> (Last update: <time class=\"dt-updated\" datetime=\"2022-09-20T00:00:00\">Sep 20, 2022</time>)</em></p>\n<p>Recently, Alistair Cockburn has been asking for feedback and making efforts to consolidate talks, documents and the concept of Hexagonal Architecture.</p>\n<pre><code class=\"language-text\">// https://alistaircockburn.com/Articles/Component-Strategy-generalizes-Ports-Adapters#wbb1\nI am drafting a new pattern, Component + Strategy, which is the more general form of Ports &amp; Adapters (Hexagonal Architecture).\nJust now, I'm looking for comments, corrections, improvements and general feedback.\n</code></pre>\n<p>In the <a href=\"https://alistaircockburn.com/Component%20plus%20strategy.pdf\">draft</a> on page 16 and 17 there is a code example of a configuration written in Java with Spring.</p>\n<p>While Spring is very popular for Java programmers I think it is important to show a configuration written with no libraries (or reflection) and why not in a different language.</p>\n<p>I proposed translating the code to Kotlin as it was, but couldn't wrap my head around the Driver interface. I will explain why I think it is problematic and submit it as feedback, along with my alternative configuration.</p>\n<p>This is a close translation of what I found on the draft, adding the interfaces and classes explicitly:</p>\n<pre><code class=\"language-kotlin\">// Not my proposal but a close Kotlin translation of what I found on the draft \ninterface Driver // (?)\nclass TestCases(val forDiscounting: ForDiscounting): Driver // Primary Adapter\nclass Console(val forDiscounting: ForDiscounting): Driver // Primary Adapter\ninterface ForDiscounting // Primary Port\nclass DiscounterApp(val rateRepository: ForObtainingRates): ForDiscounting // App\ninterface ForObtainingRates // Secondary Port\nclass StubRateRepository: ForObtainingRates // Secondary Adapter\nclass FileRateRepository: ForObtainingRates // Secondary Adapter\n\nclass DiscounterAppConfig(useConsoleDriver: Boolean, useFileRateRepository: Boolean) {\n    val rateRepository: ForObtainingRates =\n        if(useFileRateRepository) FileRateRepository()\n        else StubRateRepository()\n    val discounterApp: ForDiscounting = DiscounterApp(rateRepository)\n    val driver: Driver =\n        if(useConsoleDriver) Console(discounterApp)\n        else TestCases(discounterApp)\n}\n</code></pre>\n<p>As you can see, no library, just code. Sure this implementation will have to be instantiated manually somewhere else, but it should be a straightforward process.\nBy the way, there is nothing preventing Java to use the same approach for the configuration.</p>\n<p><em>\"But I see no functions and Spring wasn't creating fields\"</em>, I hear you say, and you are right.\nBy default, Spring provides beans as singletons this just means that it will call that method only once and share that instance to the code that needs it.\nI decided to use the fields for that reason and for simple (or carefully designed) apps this pattern can scale well with few tweaks.</p>\n<p>Ok, onto Driver now (I am assuming this interface is not empty and defines functions to be implemented for Primary Adapters):</p>\n<ol>\n<li>This interface has no name on Hexagonal Architecture, in clear contrast with all other classes and interfaces. It is effectively used as a Primary Adapter Interface</li>\n<li>Primary Adapters are supposed to be technology dependent their API may need to be adjusted to satisfy the libraries, frameworks and protocols they work with</li>\n<li>Primary Adapters depend on the application, but shouldn't \"wear a uniform\" to align with all others. Let the Primary Adapter implement what it wants and name it as it wishes\n<ul><li>Just think about TestCases, realistically tests have other goals and naming requirements than a Console Primary Adapter</li></ul>\n</li>\n<li>Finally, not all Primary Adapters fit well into the configuration. TestCases in my experience works best depending on the configuration and being instantiated by a framework</li>\n</ol>\n<p>With that I would leave the new example configuration as:</p>\n<pre><code class=\"language-kotlin\">// Proposal also found at: https://corlaez.com/hexagonal-proposal.html\nclass TestCases { // Primary Adapter (instantiated by testing framework)\n   val discounterApp: ForDiscounting = DiscounterAppConfig(false).discounterApp\n}\nclass Console(val forDiscounting: ForDiscounting) // Primary Adapter\ninterface ForDiscounting // Primary Port\nclass DiscounterApp(val rateRepository: ForObtainingRates): ForDiscounting // App\ninterface ForObtainingRates // Secondary Port\nclass StubRateRepository: ForObtainingRates // Secondary Adapter\nclass FileRateRepository: ForObtainingRates // Secondary Adapter\n\nclass DiscounterAppConfig(useFileRateRepository: Boolean) {\n    private val rateRepository: ForObtainingRates =\n        if(useFileRateRepository) FileRateRepository()\n        else StubRateRepository()\n    val discounterApp: ForDiscounting = DiscounterApp(rateRepository)\n    val discounterConsole: Console = Console(discounterApp)\n}\n</code></pre>\n<p>One extra thing I have added is the <code>private</code> for the repository (or Secondary Adapters in General). The idea being that\nother classes should only use the discounterApp or discounterConsole and not depend on or use the Secondary Adapters, not even tests.</p>\n<p>I am happy that Alistair is still working on promoting Hexagonal Architecture and asking feedback from the community.\nIf you are reading this, Alistair, I want to say thank you from the heart because your writings have influenced my growth in this industry.</p>\n<p>... now an extra section that I won't include in the proposal, but I find very useful:</p>\n<p>I love using mocks on my tests. With a small change our configuration can be used with mocking libraries!</p>\n<pre><code class=\"language-kotlin\">// Not included in proposal. A recommendation that works with mocking libraries\n// Adding an App with a Secondary Port meant to be mocked\nclass DiscounterApp2(val rateRepository: ForObtainingRates, val chaosService: ForChaos): ForDiscounting // App\ninterface ForChaos // Secondary Port\nclass RealChaos: ForChaos // Secondary Adapter\n\nclass DiscounterAppConfig(useFileRateRepository: Boolean) {\n   private val chaosService: ForChaos = RealChaos()\n   private val rateRepository: ForObtainingRates =\n      if(useFileRateRepository) FileRateRepository()\n      else StubRateRepository()\n   val discounterApp: ForDiscounting = newDiscounterApp(chaosService)// Same function used here\n   val discounterConsole: Console = newDiscounterConsole(discounterApp)// Same function used here\n\n   // Functions used by tests, the parameters allow mocks to be injected.\n   fun newDiscounterApp(chaosService: ForChaos) = DiscounterApp2(rateRepository, chaosService)\n   fun newDiscounterConsole(discounterApp: ForDiscounting) = Console(discounterApp)\n}\n</code></pre>\n<p>First we create functions to will instantiate our test subjects (app and Primary Adapters). This will also be used to instantiate their real counterparts.\nIt is important to use the same function on both cases to avoid wiring the objects with a different logic.</p>\n<p>Now the new method may have fewer arguments than the underlying class. Only keep the arguments that are meant to be mocked in tests.\nThe other arguments can be injected directly using the already created instances (such is the case of rateRepository)</p>\n<p>And this would be the usage in tests:</p>\n<pre><code class=\"language-kotlin\">class DiscounterAppTest { // Primary Adapter (instantiated by testing framework)\n   val chaosService = createMock&lt;ForChaos&gt;()\n   val discounterApp: ForDiscounting = DiscounterAppConfig(false).newDiscounterApp(chaosService)\n}\n</code></pre>\n<p>And there you go, the main code will work the same and the tests will be able to mock the designated arguments using these functions.</p>\n<p>And that's all for now!</p>\n<p>PS: If you think that a single expression to instantiate a field is too limiting you can always wrap the code in a\n<a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/run.html\">run</a> helper function <code>val x = run {...}</code> and use as many lines as you wish</p>",
                "value": "Sep 20, 2022 (Last update: Sep 20, 2022)\nRecently, Alistair Cockburn has been asking for feedback and making efforts to consolidate talks, documents and the concept of Hexagonal Architecture.// https://alistaircockburn.com/Articles/Component-Strategy-generalizes-Ports-Adapters#wbb1\nI am drafting a new pattern, Component + Strategy, which is the more general form of Ports & Adapters (Hexagonal Architecture).\nJust now, I'm looking for comments, corrections, improvements and general feedback.\nIn the draft on page 16 and 17 there is a code example of a configuration written in Java with Spring.While Spring is very popular for Java programmers I think it is important to show a configuration written with no libraries (or reflection) and why not in a different language.I proposed translating the code to Kotlin as it was, but couldn't wrap my head around the Driver interface. I will explain why I think it is problematic and submit it as feedback, along with my alternative configuration.This is a close translation of what I found on the draft, adding the interfaces and classes explicitly:// Not my proposal but a close Kotlin translation of what I found on the draft \ninterface Driver // (?)\nclass TestCases(val forDiscounting: ForDiscounting): Driver // Primary Adapter\nclass Console(val forDiscounting: ForDiscounting): Driver // Primary Adapter\ninterface ForDiscounting // Primary Port\nclass DiscounterApp(val rateRepository: ForObtainingRates): ForDiscounting // App\ninterface ForObtainingRates // Secondary Port\nclass StubRateRepository: ForObtainingRates // Secondary Adapter\nclass FileRateRepository: ForObtainingRates // Secondary Adapter\n\nclass DiscounterAppConfig(useConsoleDriver: Boolean, useFileRateRepository: Boolean) {\n    val rateRepository: ForObtainingRates =\n        if(useFileRateRepository) FileRateRepository()\n        else StubRateRepository()\n    val discounterApp: ForDiscounting = DiscounterApp(rateRepository)\n    val driver: Driver =\n        if(useConsoleDriver) Console(discounterApp)\n        else TestCases(discounterApp)\n}\nAs you can see, no library, just code. Sure this implementation will have to be instantiated manually somewhere else, but it should be a straightforward process.\nBy the way, there is nothing preventing Java to use the same approach for the configuration.\"But I see no functions and Spring wasn't creating fields\", I hear you say, and you are right.\nBy default, Spring provides beans as singletons this just means that it will call that method only once and share that instance to the code that needs it.\nI decided to use the fields for that reason and for simple (or carefully designed) apps this pattern can scale well with few tweaks.Ok, onto Driver now (I am assuming this interface is not empty and defines functions to be implemented for Primary Adapters):This interface has no name on Hexagonal Architecture, in clear contrast with all other classes and interfaces. It is effectively used as a Primary Adapter InterfacePrimary Adapters are supposed to be technology dependent their API may need to be adjusted to satisfy the libraries, frameworks and protocols they work withPrimary Adapters depend on the application, but shouldn't \"wear a uniform\" to align with all others. Let the Primary Adapter implement what it wants and name it as it wishes\nJust think about TestCases, realistically tests have other goals and naming requirements than a Console Primary AdapterFinally, not all Primary Adapters fit well into the configuration. TestCases in my experience works best depending on the configuration and being instantiated by a frameworkWith that I would leave the new example configuration as:// Proposal also found at: https://corlaez.com/hexagonal-proposal.html\nclass TestCases { // Primary Adapter (instantiated by testing framework)\n   val discounterApp: ForDiscounting = DiscounterAppConfig(false).discounterApp\n}\nclass Console(val forDiscounting: ForDiscounting) // Primary Adapter\ninterface ForDiscounting // Primary Port\nclass DiscounterApp(val rateRepository: ForObtainingRates): ForDiscounting // App\ninterface ForObtainingRates // Secondary Port\nclass StubRateRepository: ForObtainingRates // Secondary Adapter\nclass FileRateRepository: ForObtainingRates // Secondary Adapter\n\nclass DiscounterAppConfig(useFileRateRepository: Boolean) {\n    private val rateRepository: ForObtainingRates =\n        if(useFileRateRepository) FileRateRepository()\n        else StubRateRepository()\n    val discounterApp: ForDiscounting = DiscounterApp(rateRepository)\n    val discounterConsole: Console = Console(discounterApp)\n}\nOne extra thing I have added is the private for the repository (or Secondary Adapters in General). The idea being that\nother classes should only use the discounterApp or discounterConsole and not depend on or use the Secondary Adapters, not even tests.I am happy that Alistair is still working on promoting Hexagonal Architecture and asking feedback from the community.\nIf you are reading this, Alistair, I want to say thank you from the heart because your writings have influenced my growth in this industry.... now an extra section that I won't include in the proposal, but I find very useful:I love using mocks on my tests. With a small change our configuration can be used with mocking libraries!// Not included in proposal. A recommendation that works with mocking libraries\n// Adding an App with a Secondary Port meant to be mocked\nclass DiscounterApp2(val rateRepository: ForObtainingRates, val chaosService: ForChaos): ForDiscounting // App\ninterface ForChaos // Secondary Port\nclass RealChaos: ForChaos // Secondary Adapter\n\nclass DiscounterAppConfig(useFileRateRepository: Boolean) {\n   private val chaosService: ForChaos = RealChaos()\n   private val rateRepository: ForObtainingRates =\n      if(useFileRateRepository) FileRateRepository()\n      else StubRateRepository()\n   val discounterApp: ForDiscounting = newDiscounterApp(chaosService)// Same function used here\n   val discounterConsole: Console = newDiscounterConsole(discounterApp)// Same function used here\n\n   // Functions used by tests, the parameters allow mocks to be injected.\n   fun newDiscounterApp(chaosService: ForChaos) = DiscounterApp2(rateRepository, chaosService)\n   fun newDiscounterConsole(discounterApp: ForDiscounting) = Console(discounterApp)\n}\nFirst we create functions to will instantiate our test subjects (app and Primary Adapters). This will also be used to instantiate their real counterparts.\nIt is important to use the same function on both cases to avoid wiring the objects with a different logic.Now the new method may have fewer arguments than the underlying class. Only keep the arguments that are meant to be mocked in tests.\nThe other arguments can be injected directly using the already created instances (such is the case of rateRepository)And this would be the usage in tests:class DiscounterAppTest { // Primary Adapter (instantiated by testing framework)\n   val chaosService = createMock<ForChaos>()\n   val discounterApp: ForDiscounting = DiscounterAppConfig(false).newDiscounterApp(chaosService)\n}\nAnd there you go, the main code will work the same and the tests will be able to mock the designated arguments using these functions.And that's all for now!PS: If you think that a single expression to instantiate a field is too limiting you can always wrap the code in a\nrun helper function val x = run {...} and use as many lines as you wish"
              }
            ],
            "published": [
              "2022-09-20T00:00:00"
            ],
            "updated": [
              "2022-09-20T00:00:00"
            ]
          }
        },
        {
          "type": [
            "h-entry"
          ],
          "properties": {
            "url": [
              "https://corlaez.com/blog/kotlin-htmx.html"
            ],
            "name": [
              "Kotlin-htmx"
            ],
            "content": [
              {
                "html": "<p><em><time class=\"dt-published\" datetime=\"2022-09-19T00:00:00\">Sep 19, 2022</time></em></p>\n<p>Today I will talk about why I think <a href=\"https://kotlinlang.org/\">Kotlin</a> and <a href=\"https://htmx.org/\">htmx</a> mix so well. You can follow along (or skip the article) with the code <a href=\"https://github.com/corlaez/kotlin-htmx\">here</a> (there is also a static generation example in the static branch there). Try the demo <a href=\"https://corlaez.com/htmx.html\">here</a>.</p>\n<p>Kotlin as you may know is a modern JVM and (more recently) multiplatform language. It has a great type system and interesting advanced features while still being a pragmatic tool meant for engineers.</p>\n<p>htmx is a JavaScript library that allows you to write HTML attributes instead of JS code to load content from the server and manipulate the DOM. Your HTML will be more powerful than ever and you will deal less with JS.</p>\n<p>Let's start! The main function creates a <a href=\"https://javalin.io/\">Javalin</a> HTTP Server (static files config including <a href=\"https://www.webjars.org/\">Webjars</a> which is how we will import the htmx js code avoiding node) and adds the \"Friends\" module (which is an extension function). Finally, it starts the server. A key config I want to highlight is the webjars setup that will help us serve htmx:</p>\n<pre><code class=\"language-kotlin\">// https://github.com/corlaez/kotlin-htmx/blob/master/src/main/kotlin/javalin.kt\nconfig.addStaticFiles { staticFiles -&gt;\n    staticFiles.directory = \"META-INF/resources/webjars/\"\n    staticFiles.location = Location.CLASSPATH\n}\n</code></pre>\n<p>It is important to mention that Javalin can be replaced with any HTTP Server you like. In fact your can drop the server altogether, write your HTML Strings to files and make your own static generator (that's how corlaez.com is written)</p>\n<p>Then addFriendsModule creates an index route and a route for each friend. ctx.html is the Javalin function to respond with an HTML string. friends.forEach will be <a href=\"https://kotlinlang.org/docs/inline-functions.html\">inlined</a> into a regular for loop</p>\n<pre><code class=\"language-kotlin\">// https://github.com/corlaez/kotlin-htmx/blob/master/src/main/kotlin/friends/addFriendsModule.kt\nfun Javalin.addFriendsModule() {\n    val friends = listOf(\"Joseph\", \"Nicholas\", \"Caesar\")\n    get(\"/\") { ctx -&gt;\n        ctx.html(htmlFriendsIndex(friends))\n    }\n    friends.forEach { friend -&gt;\n        get(\"/$friend\") { ctx -&gt;\n            val characteristic = listOf(\"swimmer\", \"runner\", \"debater\").random()\n            ctx.html(htmlFriendProfile(friend, characteristic))\n        }\n    }\n}\n</code></pre>\n<p>Next we have the base html template which is a Kotlin function. The parameter is a <a href=\"https://kotlinlang.org/docs/lambdas.html#function-literals-with-receiver\">lambda with receiver</a> that will populate our HTML body tag and the return is an String. <code>createHTML</code> takes out fancy DSL and outputs a String as well.\nIf you try to define a body tag inside a head or viceversa the editor and compiler will let you know.</p>\n<pre><code class=\"language-kotlin\">// https://github.com/corlaez/kotlin-htmx/blob/master/src/main/kotlin/htmlBaseTemplate.kt\nfun htmlBaseTemplate(bodyFn: BODY.() -&gt; Unit): String {\n    return \"&lt;!DOCTYPE html&gt;\" + createHTML().html {\n        lang = \"en\"\n        head {\n            script { src = \"/htmx.org/$htmxVersion/dist/htmx.js\" }\n            link { href = \"/modest-variation.css\"; rel=\"stylesheet\" }\n        }\n        body {\n            bodyFn()\n        }\n    }\n}\n</code></pre>\n<p>Let's now focus on htmlFriendProfile and htmlFriendsIndex now:</p>\n<pre><code class=\"language-kotlin\">// https://github.com/corlaez/kotlin-htmx/blob/master/src/main/kotlin/friends/html.kt\nfun htmlFriendsIndex(friends: List&lt;String&gt;): String {\n    return htmlBaseTemplate {\n        h1 { a { href = \"/\"; +\"My Friends\" } }// nested `a` inside a `h1`. To insert a text inside any tag we use the + operator\n        friends.forEach { friend -&gt;// Regular Kotlin used to loop!\n            h2 {\n                a {\n                    href = \"/$friend\"// Sets cursor pointer and works without js\n                    hxGet(\"/$friend\")\n                    hxSwap(\"outerHTML\")\n                    hxTarget(\"closest h2\")\n                    +friend\n                }\n            }\n        }\n    }\n}\n\nfun htmlFriendProfile(friend: String, characteristic: String): String {\n    return createHTML().article { // createHTML will take all the DSL and produce a String\n        h2(classes = \"your-css-class\") {\n            +friend\n        }\n        p {\n            +\"My friend $friend is smart and a good $characteristic\"\n        }\n    }\n}\n</code></pre>\n<p>htmlFriendsIndex calls htmlBaseTemplate as this is meant to be a full page. This index builds its contents using regular Kotlin loops. htmlFriendProfile, on the other hand, creates the HTML directly as it is just a partial HTML document.</p>\n<p>The hx functions are simple HTMLTag <a href=\"https://kotlinlang.org/docs/extensions.html\">extension functions</a> that add HTML attributes.</p>\n<pre><code class=\"language-kotlin\">// https://github.com/corlaez/kotlin-htmx/blob/master/src/main/kotlin/hx.kt\nfun HTMLTag.hxGet(value: String) {\n    attributes += \"hx-get\" to value\n}\nfun HTMLTag.hxSwap(value: String) {\n    attributes += \"hx-swap\" to value\n}\nfun HTMLTag.hxTarget(value: String) {\n    attributes += \"hx-target\" to value\n}\n</code></pre>\n<p>The autocomplete game of HTML DSL gives me the best experience writing HTML I have ever experienced and the htmx integration is seamless. It is hard to articulate how good is it until you try it (Use <a href=\"https://www.jetbrains.com/idea/\">IntelliJ IDEA</a> if in doubt, there is a free community edition, and they do offer education licences if you have an institutional email)</p>\n<p><strong>Cons!</strong></p>\n<ul>\n<li>The DSL is written with advanced Kotlin features and will force you to use/learn (maybe not that bad) advanced features if you try to break templates into different functions as I did.</li>\n<li>Kotlin's advanced features are better experienced with IntelliJ IDEA. There is a great free community edition but no other great alternatives that I know of.</li>\n<li>While the HTML DSL autocomplete is very powerful at preventing mistakes, it does rely on a lot of imports. I recommend isolating the template code from the rest of your code (which is probably a good idea anyway)</li>\n<li>Regarding HTMX, perhaps the biggest drawback and advantage is that it goes against the norm: it works best if you serve HTML partials from your server, the old school way. This works great for websites meant to be used by humans.</li>\n</ul>\n<p>I hope this was interesting, have fun!</p>",
                "value": "Sep 19, 2022\nToday I will talk about why I think Kotlin and htmx mix so well. You can follow along (or skip the article) with the code here (there is also a static generation example in the static branch there). Try the demo here.Kotlin as you may know is a modern JVM and (more recently) multiplatform language. It has a great type system and interesting advanced features while still being a pragmatic tool meant for engineers.htmx is a JavaScript library that allows you to write HTML attributes instead of JS code to load content from the server and manipulate the DOM. Your HTML will be more powerful than ever and you will deal less with JS.Let's start! The main function creates a Javalin HTTP Server (static files config including Webjars which is how we will import the htmx js code avoiding node) and adds the \"Friends\" module (which is an extension function). Finally, it starts the server. A key config I want to highlight is the webjars setup that will help us serve htmx:// https://github.com/corlaez/kotlin-htmx/blob/master/src/main/kotlin/javalin.kt\nconfig.addStaticFiles { staticFiles ->\n    staticFiles.directory = \"META-INF/resources/webjars/\"\n    staticFiles.location = Location.CLASSPATH\n}\nIt is important to mention that Javalin can be replaced with any HTTP Server you like. In fact your can drop the server altogether, write your HTML Strings to files and make your own static generator (that's how corlaez.com is written)Then addFriendsModule creates an index route and a route for each friend. ctx.html is the Javalin function to respond with an HTML string. friends.forEach will be inlined into a regular for loop// https://github.com/corlaez/kotlin-htmx/blob/master/src/main/kotlin/friends/addFriendsModule.kt\nfun Javalin.addFriendsModule() {\n    val friends = listOf(\"Joseph\", \"Nicholas\", \"Caesar\")\n    get(\"/\") { ctx ->\n        ctx.html(htmlFriendsIndex(friends))\n    }\n    friends.forEach { friend ->\n        get(\"/$friend\") { ctx ->\n            val characteristic = listOf(\"swimmer\", \"runner\", \"debater\").random()\n            ctx.html(htmlFriendProfile(friend, characteristic))\n        }\n    }\n}\nNext we have the base html template which is a Kotlin function. The parameter is a lambda with receiver that will populate our HTML body tag and the return is an String. createHTML takes out fancy DSL and outputs a String as well.\nIf you try to define a body tag inside a head or viceversa the editor and compiler will let you know.// https://github.com/corlaez/kotlin-htmx/blob/master/src/main/kotlin/htmlBaseTemplate.kt\nfun htmlBaseTemplate(bodyFn: BODY.() -> Unit): String {\n    return \"<!DOCTYPE html>\" + createHTML().html {\n        lang = \"en\"\n        head {\n            script { src = \"/htmx.org/$htmxVersion/dist/htmx.js\" }\n            link { href = \"/modest-variation.css\"; rel=\"stylesheet\" }\n        }\n        body {\n            bodyFn()\n        }\n    }\n}\nLet's now focus on htmlFriendProfile and htmlFriendsIndex now:// https://github.com/corlaez/kotlin-htmx/blob/master/src/main/kotlin/friends/html.kt\nfun htmlFriendsIndex(friends: List<String>): String {\n    return htmlBaseTemplate {\n        h1 { a { href = \"/\"; +\"My Friends\" } }// nested `a` inside a `h1`. To insert a text inside any tag we use the + operator\n        friends.forEach { friend ->// Regular Kotlin used to loop!\n            h2 {\n                a {\n                    href = \"/$friend\"// Sets cursor pointer and works without js\n                    hxGet(\"/$friend\")\n                    hxSwap(\"outerHTML\")\n                    hxTarget(\"closest h2\")\n                    +friend\n                }\n            }\n        }\n    }\n}\n\nfun htmlFriendProfile(friend: String, characteristic: String): String {\n    return createHTML().article { // createHTML will take all the DSL and produce a String\n        h2(classes = \"your-css-class\") {\n            +friend\n        }\n        p {\n            +\"My friend $friend is smart and a good $characteristic\"\n        }\n    }\n}\nhtmlFriendsIndex calls htmlBaseTemplate as this is meant to be a full page. This index builds its contents using regular Kotlin loops. htmlFriendProfile, on the other hand, creates the HTML directly as it is just a partial HTML document.The hx functions are simple HTMLTag extension functions that add HTML attributes.// https://github.com/corlaez/kotlin-htmx/blob/master/src/main/kotlin/hx.kt\nfun HTMLTag.hxGet(value: String) {\n    attributes += \"hx-get\" to value\n}\nfun HTMLTag.hxSwap(value: String) {\n    attributes += \"hx-swap\" to value\n}\nfun HTMLTag.hxTarget(value: String) {\n    attributes += \"hx-target\" to value\n}\nThe autocomplete game of HTML DSL gives me the best experience writing HTML I have ever experienced and the htmx integration is seamless. It is hard to articulate how good is it until you try it (Use IntelliJ IDEA if in doubt, there is a free community edition, and they do offer education licences if you have an institutional email)Cons!The DSL is written with advanced Kotlin features and will force you to use/learn (maybe not that bad) advanced features if you try to break templates into different functions as I did.Kotlin's advanced features are better experienced with IntelliJ IDEA. There is a great free community edition but no other great alternatives that I know of.While the HTML DSL autocomplete is very powerful at preventing mistakes, it does rely on a lot of imports. I recommend isolating the template code from the rest of your code (which is probably a good idea anyway)Regarding HTMX, perhaps the biggest drawback and advantage is that it goes against the norm: it works best if you serve HTML partials from your server, the old school way. This works great for websites meant to be used by humans.I hope this was interesting, have fun!"
              }
            ],
            "published": [
              "2022-09-19T00:00:00"
            ]
          }
        },
        {
          "type": [
            "h-entry"
          ],
          "properties": {
            "url": [
              "https://corlaez.com/blog/more-kotlin-less-js.html"
            ],
            "name": [
              "More Kotlin, Less JS!"
            ],
            "content": [
              {
                "html": "<p><em><time class=\"dt-published\" datetime=\"2022-08-03T00:00:00\">Aug 3, 2022</time> (Last update: <time class=\"dt-updated\" datetime=\"2022-08-31T00:00:00\">Aug 31, 2022</time>)</em></p>\n<p>In the last years, JavaScript had an incredible growth, complex apps, frameworks and languages that compile to JS have been developed to create rich and complex web UIs and experiences.\nI started to use React at work in 2017 in a webapp that truly required the use of that library. I enjoyed working with React and used it whenever I had a chance.\nThat's how I ended up writing mi personal website in React, in retrospective a terrible idea since my web wouldn't load at all without JavaScript, affecting SEO and reducing load speeds.</p>\n<p>Today, I finally rewrote this website adding some big changes I have been planning for a while:</p>\n<ul>\n<li>The web is generated statically using <a href=\"https://kotlinlang.org/\">Kotlin</a>\n</li>\n<li>The website <strong>no longer requires JavaScript</strong> to render</li>\n<li>The articles are written in <a href=\"https://www.markdownguide.org/\">Markdown</a>\n</li>\n<li>\n<strong>Internalization support</strong> for the Kotlin templates and Markdown articles</li>\n<li>Templates are defined using the <a href=\"https://github.com/Kotlin/kotlinx.html\">Kotlinx HTML DSL</a>. (Similar to JSX but strongly typed)</li>\n<li>There is a <strong>dev server</strong> that reloads webpages as code changes (inspired on <a href=\"https://github.com/gaearon/react-hot-loader\">react-hot-loader</a>)</li>\n</ul>\n<p>These projects and ideas have influenced the design of my website:</p>\n<ul>\n<li>\n<a href=\"https://htmx.org/\">htmx</a> AJAX, CSS Transitions, WebSockets and Server Sent Events directly in HTML, using attributes and reclaim HTML as the Hypermedia to be exchanged between browser and HTTP Server</li>\n<li>\n<a href=\"https://gemini.circumlunar.space/\">Gemini Protocol</a>: Gemini is a lighter and simpler protocol than HTTP with mandatory Transport Layer Security and privacy focus (JavaScript does not exist)</li>\n<li>\n<a href=\"https://ar.al/2020/08/07/what-is-the-small-web/\">The Small Web</a>: Aral Balkan and Laura Kalbag are building tools to promote independent web avoiding the centralized web and the problems it creates for democracy and society</li>\n<li>\n<a href=\"https://endtimes.dev/why-your-website-should-be-under-14kb-in-size/\">website &lt; 14kb</a> endtime.dev's article on the significant performance improvement that smaller web pages gain.</li>\n</ul>\n<p>So there you have it, I think this changes will allow me to experiment and create more easily. We shall see...</p>",
                "value": "Aug 3, 2022 (Last update: Aug 31, 2022)\nIn the last years, JavaScript had an incredible growth, complex apps, frameworks and languages that compile to JS have been developed to create rich and complex web UIs and experiences.\nI started to use React at work in 2017 in a webapp that truly required the use of that library. I enjoyed working with React and used it whenever I had a chance.\nThat's how I ended up writing mi personal website in React, in retrospective a terrible idea since my web wouldn't load at all without JavaScript, affecting SEO and reducing load speeds.Today, I finally rewrote this website adding some big changes I have been planning for a while:The web is generated statically using KotlinThe website no longer requires JavaScript to renderThe articles are written in MarkdownInternalization support for the Kotlin templates and Markdown articlesTemplates are defined using the Kotlinx HTML DSL. (Similar to JSX but strongly typed)There is a dev server that reloads webpages as code changes (inspired on react-hot-loader)These projects and ideas have influenced the design of my website:htmx AJAX, CSS Transitions, WebSockets and Server Sent Events directly in HTML, using attributes and reclaim HTML as the Hypermedia to be exchanged between browser and HTTP ServerGemini Protocol: Gemini is a lighter and simpler protocol than HTTP with mandatory Transport Layer Security and privacy focus (JavaScript does not exist)The Small Web: Aral Balkan and Laura Kalbag are building tools to promote independent web avoiding the centralized web and the problems it creates for democracy and societywebsite < 14kb endtime.dev's article on the significant performance improvement that smaller web pages gain.So there you have it, I think this changes will allow me to experiment and create more easily. We shall see..."
              }
            ],
            "published": [
              "2022-08-03T00:00:00"
            ],
            "updated": [
              "2022-08-31T00:00:00"
            ]
          }
        },
        {
          "type": [
            "h-entry"
          ],
          "properties": {
            "url": [
              "https://corlaez.com/blog/skype-chatbot.html"
            ],
            "name": [
              "Skype Chatbot"
            ],
            "content": [
              {
                "html": "<p><em><time class=\"dt-published\" datetime=\"2019-09-02T00:00:00\">Sep 2, 2019</time> (Last update: <time class=\"dt-updated\" datetime=\"2022-08-31T00:00:00\">Aug 31, 2022</time>)</em></p>\n<p>\"Daniel en mi piso\" (Daniel in my floor) was a Skype bot that I made for my coworkers when I worked at Bellatrix. Daniel came every day selling delicious home-made sandwiches.\nHe stayed a few minutes outside each floor with Bellatrix offices and other companies. However, we would have to step out at the right time to catch him, or we would miss him.</p>\n<p>The bot was meant to Announce when Daniel arrives to your floor. You subscribe to a given floor, and when the bot is notified that Daniel is in a given floor, you receive a message and a notification.\nThe simple program relied on trust and accurate reports of its participants to work, but it was a fun experiment to run. The bot is deployed but deactivated</p>\n<p><a href=\"https://github.com/corlaez/df-bot\">Skype Bot GitHub Repo</a></p>\n<p><a href=\"https://join.skype.com/bot/6397acda-dd3f-46e2-a90b-af14bd2c6565\">Skype Bot Link (deactivated)</a></p>",
                "value": "Sep 2, 2019 (Last update: Aug 31, 2022)\n\"Daniel en mi piso\" (Daniel in my floor) was a Skype bot that I made for my coworkers when I worked at Bellatrix. Daniel came every day selling delicious home-made sandwiches.\nHe stayed a few minutes outside each floor with Bellatrix offices and other companies. However, we would have to step out at the right time to catch him, or we would miss him.The bot was meant to Announce when Daniel arrives to your floor. You subscribe to a given floor, and when the bot is notified that Daniel is in a given floor, you receive a message and a notification.\nThe simple program relied on trust and accurate reports of its participants to work, but it was a fun experiment to run. The bot is deployed but deactivatedSkype Bot GitHub RepoSkype Bot Link (deactivated)"
              }
            ],
            "published": [
              "2019-09-02T00:00:00"
            ],
            "updated": [
              "2022-08-31T00:00:00"
            ]
          }
        },
        {
          "type": [
            "h-entry"
          ],
          "properties": {
            "url": [
              "https://corlaez.com/blog/overmind-tutorial.html"
            ],
            "name": [
              "Overmind tutorial"
            ],
            "content": [
              {
                "html": "<p><em><time class=\"dt-published\" datetime=\"2019-01-05T00:00:00\">Jan 5, 2019</time> (Last update: <time class=\"dt-updated\" datetime=\"2022-08-31T00:00:00\">Aug 31, 2022</time>)</em></p>\n<p>A tutorial on the JavaScript UI library state manager <a href=\"https://overmindjs.org/\">Overmind JS</a> in a React application.</p>\n<p>In the video I use React, but it can also be used with Angular, Vue and Svelte.</p>\n<p><a href=\"https://www.youtube.com/watch?v=pe1F0-A-e8U\">YouTube tutorial</a></p>",
                "value": "Jan 5, 2019 (Last update: Aug 31, 2022)\nA tutorial on the JavaScript UI library state manager Overmind JS in a React application.In the video I use React, but it can also be used with Angular, Vue and Svelte.YouTube tutorial"
              }
            ],
            "published": [
              "2019-01-05T00:00:00"
            ],
            "updated": [
              "2022-08-31T00:00:00"
            ]
          }
        }
      ]
    }
  ],
  "rels": {
    "preload": [
      "https://corlaez.com/assets/dark-red.webp"
    ],
    "canonical": [
      "https://corlaez.com/"
    ],
    "alternate": [
      "https://corlaez.com/es/"
    ],
    "stylesheet": [
      "https://corlaez.com/styles.css",
      "https://corlaez.com/assets/prism.css"
    ],
    "icon": [
      "https://corlaez.com/assets/favicon/favicon-16x16.png",
      "https://corlaez.com/assets/favicon/favicon-32x32.png",
      "https://corlaez.com/assets/favicon/favicon-96x96.png",
      "https://corlaez.com/assets/favicon/android-icon-192x192.png",
      "https://corlaez.com/favicon.ico"
    ],
    "apple-touch-icon": [
      "https://corlaez.com/assets/favicon/apple-icon-57x57.png",
      "https://corlaez.com/assets/favicon/apple-icon-60x60.png",
      "https://corlaez.com/assets/favicon/apple-icon-72x72.png",
      "https://corlaez.com/assets/favicon/apple-icon-76x76.png",
      "https://corlaez.com/assets/favicon/apple-icon-114x114.png",
      "https://corlaez.com/assets/favicon/apple-icon-120x120.png",
      "https://corlaez.com/assets/favicon/apple-icon-144x144.png",
      "https://corlaez.com/assets/favicon/apple-icon-152x152.png",
      "https://corlaez.com/assets/favicon/apple-icon-180x180.png"
    ],
    "manifest": [
      "https://corlaez.com/manifest.json"
    ],
    "shortcut": [
      "https://corlaez.com/favicon.ico"
    ],
    "webmention": [
      "https://webmention.io/corlaez.com/webmention"
    ],
    "pingback": [
      "https://webmention.io/corlaez.com/xmlrpc"
    ],
    "authorization_endpoint": [
      "https://indieauth.com/auth"
    ],
    "token_endpoint": [
      "https://tokens.indieauth.com/token"
    ],
    "microsub": [
      "https://aperture.p3k.io/microsub/781"
    ],
    "legal": [
      "https://corlaez.com/legal.html"
    ],
    "privacy": [
      "https://corlaez.com/legal.html"
    ],
    "authn": [
      "https://github.com/corlaez"
    ],
    "me": [
      "https://github.com/corlaez",
      "https://linkedin.com/in/corlaez",
      "https://twitter.com/corlaez"
    ],
    "nofollow": [
      "https://github.com/corlaez",
      "https://linkedin.com/in/corlaez",
      "https://twitter.com/corlaez",
      "https://xn--sr8hvo.ws/%F0%9F%94%AE%F0%9F%90%9C%F0%9F%9A%87/previous",
      "https://xn--sr8hvo.ws/",
      "https://xn--sr8hvo.ws/%F0%9F%94%AE%F0%9F%90%9C%F0%9F%9A%87/next"
    ],
    "noopener": [
      "https://github.com/corlaez",
      "https://linkedin.com/in/corlaez",
      "https://twitter.com/corlaez",
      "https://xn--sr8hvo.ws/%F0%9F%94%AE%F0%9F%90%9C%F0%9F%9A%87/previous",
      "https://xn--sr8hvo.ws/",
      "https://xn--sr8hvo.ws/%F0%9F%94%AE%F0%9F%90%9C%F0%9F%9A%87/next"
    ],
    "noreferrer": [
      "https://github.com/corlaez",
      "https://linkedin.com/in/corlaez",
      "https://twitter.com/corlaez",
      "https://xn--sr8hvo.ws/%F0%9F%94%AE%F0%9F%90%9C%F0%9F%9A%87/previous",
      "https://xn--sr8hvo.ws/",
      "https://xn--sr8hvo.ws/%F0%9F%94%AE%F0%9F%90%9C%F0%9F%9A%87/next"
    ]
  },
  "rel-urls": {
    "https://corlaez.com/assets/dark-red.webp": {
      "rels": [
        "preload"
      ]
    },
    "https://corlaez.com/": {
      "rels": [
        "canonical"
      ]
    },
    "https://corlaez.com/es/": {
      "rels": [
        "alternate"
      ],
      "hreflang": "es"
    },
    "https://corlaez.com/styles.css": {
      "rels": [
        "stylesheet"
      ]
    },
    "https://corlaez.com/assets/favicon/favicon-16x16.png": {
      "rels": [
        "icon"
      ],
      "type": "image/png"
    },
    "https://corlaez.com/assets/favicon/favicon-32x32.png": {
      "rels": [
        "icon"
      ],
      "type": "image/png"
    },
    "https://corlaez.com/assets/favicon/apple-icon-57x57.png": {
      "rels": [
        "apple-touch-icon"
      ]
    },
    "https://corlaez.com/assets/favicon/apple-icon-60x60.png": {
      "rels": [
        "apple-touch-icon"
      ]
    },
    "https://corlaez.com/assets/favicon/apple-icon-72x72.png": {
      "rels": [
        "apple-touch-icon"
      ]
    },
    "https://corlaez.com/assets/favicon/apple-icon-76x76.png": {
      "rels": [
        "apple-touch-icon"
      ]
    },
    "https://corlaez.com/assets/favicon/favicon-96x96.png": {
      "rels": [
        "icon"
      ],
      "type": "image/png"
    },
    "https://corlaez.com/assets/favicon/apple-icon-114x114.png": {
      "rels": [
        "apple-touch-icon"
      ]
    },
    "https://corlaez.com/assets/favicon/apple-icon-120x120.png": {
      "rels": [
        "apple-touch-icon"
      ]
    },
    "https://corlaez.com/assets/favicon/apple-icon-144x144.png": {
      "rels": [
        "apple-touch-icon"
      ]
    },
    "https://corlaez.com/assets/favicon/apple-icon-152x152.png": {
      "rels": [
        "apple-touch-icon"
      ]
    },
    "https://corlaez.com/assets/favicon/apple-icon-180x180.png": {
      "rels": [
        "apple-touch-icon"
      ]
    },
    "https://corlaez.com/assets/favicon/android-icon-192x192.png": {
      "rels": [
        "icon"
      ],
      "type": "image/png"
    },
    "https://corlaez.com/manifest.json": {
      "rels": [
        "manifest"
      ]
    },
    "https://corlaez.com/favicon.ico": {
      "rels": [
        "icon",
        "shortcut"
      ]
    },
    "https://webmention.io/corlaez.com/webmention": {
      "rels": [
        "webmention"
      ]
    },
    "https://webmention.io/corlaez.com/xmlrpc": {
      "rels": [
        "pingback"
      ]
    },
    "https://indieauth.com/auth": {
      "rels": [
        "authorization_endpoint"
      ]
    },
    "https://tokens.indieauth.com/token": {
      "rels": [
        "token_endpoint"
      ]
    },
    "https://aperture.p3k.io/microsub/781": {
      "rels": [
        "microsub"
      ]
    },
    "https://corlaez.com/assets/prism.css": {
      "rels": [
        "stylesheet"
      ]
    },
    "https://corlaez.com/legal.html": {
      "rels": [
        "legal",
        "privacy"
      ],
      "text": "Legal"
    },
    "https://github.com/corlaez": {
      "rels": [
        "authn",
        "me",
        "nofollow",
        "noopener",
        "noreferrer"
      ],
      "text": "Github"
    },
    "https://linkedin.com/in/corlaez": {
      "rels": [
        "me",
        "nofollow",
        "noopener",
        "noreferrer"
      ],
      "text": "LinkedIn"
    },
    "https://twitter.com/corlaez": {
      "rels": [
        "me",
        "nofollow",
        "noopener",
        "noreferrer"
      ],
      "text": "Twitter"
    },
    "https://xn--sr8hvo.ws/%F0%9F%94%AE%F0%9F%90%9C%F0%9F%9A%87/previous": {
      "rels": [
        "nofollow",
        "noopener",
        "noreferrer"
      ],
      "text": "←"
    },
    "https://xn--sr8hvo.ws/": {
      "rels": [
        "nofollow",
        "noopener",
        "noreferrer"
      ],
      "text": "IndieWeb Webring"
    },
    "https://xn--sr8hvo.ws/%F0%9F%94%AE%F0%9F%90%9C%F0%9F%9A%87/next": {
      "rels": [
        "nofollow",
        "noopener",
        "noreferrer"
      ],
      "text": "→"
    }
  }
}